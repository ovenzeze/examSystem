function showchildMenu(t){show?($("."+t.data.liName).slideUp(),show=!1):($("."+t.data.liName).slideDown(),show=!0)}function updateSubject(){$("#subject > tbody").children().remove("*"),$.ajax({method:"get",url:"http://clayz.top/exam/libraryInfo",data:"",contentType:"plain",success:function(t){console.log(t),subject=[];for(var e=0;e<t.length;e++){var i=new sub;i.id=t[e].id,i.content=t[e].content,i.time=t[e].time,i.type=t[e].type,i.kind=t[e].kind,i.answer=t[e].answer,subject.push(i)}insert()},error:function(t){console.log(t)}})}function insert(){$("#subject>tbody").html("");for(var t=0;t<subject.length;t++){var e=$("#subject>tbody").append("<tr></tr>");e.children(":last-child").append('<td><div class = "checkbox f-l col-md-12 top-m-0"><label for="checkbox'+t+'"><input type="checkbox" id="checkbox'+t+'">'+(t+1)+"</label></div></td><td>"+subject[t].content+"</td><td>"+subject[t].type+"</td><td>"+subject[t].kind+"</td><td>"+subject[t].time+'</td><td class="color-primary"><a href="javascript:void(0);">&nbsp;&nbsp;<i class="fa fa-trash-o cur-p"></i>&nbsp;&nbsp;</a>/<a href="javascript:void(0);">&nbsp;&nbsp;<i class="ion-ios-compose"></i>&nbsp;&nbsp;</a></td>')}$("#subject").find("th").addClass("active"),$("#subject").find("tr:nth-child(4n)").addClass("active"),$("#subject").find("tr:nth-child(4n+1)").addClass("info"),$("#subject").find("tr:nth-child(4n+2)").addClass("warning"),$("#subject").find("tr:nth-child(4n+3)").addClass("success")}function display(t){t.addClass("top-display-b"),t.addClass("fade"),t.addClass("in")}function hidden(t){t.removeClass("top-display-b"),t.removeClass("fade"),t.removeClass("in")}function sub(){this.id="",this.content="",this.time="",this.type="",this.kind="",this.answer=""}var show=!1,li1={liName:"course"},li2={liName:"assessment"},li3={liName:"grade"};$("#course").click(li1,showchildMenu),$("#assessment").click(li2,showchildMenu),$("#grade").click(li3,showchildMenu),$("#topic-add-btn").click(function(){$("#topic-add-subject").find("textarea").val(""),display($("#topic-add-subject"))}),$("#topic-adda-btn").click(function(){display($("#topic-adda-subject"))}),$("#topic-add-subject .modal-footer").find("button").eq(0).click(function(){if(""!=$(this).parent().parent().find("textarea").val()){var t=new sub;t.content=$(this).parent().parent().find("textarea").val(),t.time=(new Date).Format(),t.type=$(this).parent().parent().find("#selectSub").val(),t.kind=$('#topic-add-subject input:radio[name="inlineRadioOptions"]:checked').parent().text(),t.answer=$("#topic-add-subject").find('input[type="text"]').not("#selectSub").val()}hidden($(this).parent().parent().parent().parent()),$.ajax({method:"post",url:"http://clayz.top/exam/courseInfo/exam/courseAdd",contentType:"application/json",data:JSON.stringify({content:t.content,time:t.time,type:t.type,kind:t.kind,answer:t.answer}),success:function(t){subject.push(t),insert()},error:function(){console.log("error")}})}),$("#topic-adda-subject .modal-footer").find("button").eq(0).click(function(){hidden($(this).parent().parent().parent().parent())});var deleteSubject=[],subject=[],index,_this,whichDelete=0;Date.prototype.Format=function(){var t=this.getFullYear(),e=this.getMonth()+1,i=this.getDate();return t+"-"+e+"-"+i},$("#check-all").click(function(){$('input[type = "checkbox"]').not($("#check-all").find("input")[0]).prop("checked",$(this).is(":checked"))}),$("#topic-error .modal-footer").find("button").click(function(){hidden($("#topic-error"))}),$("button.close").click(function(){$(this).parent().parent().parent().parent().removeClass("top-display-b")}),$(".modal-footer").find("button:odd").click(function(){hidden($(this).parent().parent().parent().parent()),deleteSubject=[]}),$("#topic-page").find("li:eq(0)").addClass("disabled"),$("#topic-page").find("li:eq(1)").addClass("active"),updateSubject(),$("#topic-delete-btn").click(function(){deleteSubject=[];for(var t=0;t<$('input[type="checkbox"]').not($("#check-all")).size();t++)$('input[type="checkbox"]').not($("#check-all")).eq(t).is(":checked")&&deleteSubject.push(subject[t]);display(0!=deleteSubject.length?$("#topic-delete-subject"):$("#topic-error"))}),$("#subject").on("click","a:even",function(){deleteSubject=[];var t=subject[$(this).parent().parent().index()];deleteSubject.push(t),display($("#topic-delete-subject")),whichDelete=1}),$("#topic-delete-subject .modal-footer").find("button").eq(0).click(function(){if(!whichDelete){deleteSubject=[];for(var t=$("#subject").find("input[type=checkbox]"),e=0;e<t.length;e++)t.eq(e).is(":checked")&&deleteSubject.push(subject[t.eq(e).parent().parent().parent().parent().index()])}hidden($(this).parent().parent().parent().parent()),$.ajax({method:"post",url:"http://clayz.top/exam/courseInfo/exam/courseAdd",data:JSON.stringify({delete:deleteSubject}),contentType:"application/json",success:function(t){updateSubject()},error:function(){console.log("delete error")}}),whichDelete=0}),$("#topic-lead-btn").click(function(){deleteSubject=[];for(var t=0;t<$('input[type="checkbox"]').not($("#check-all")).size();t++)$('input[type="checkbox"]').not($("#check-all")).eq(t).is(":checked")&&deleteSubject.push(subject[t]);0!=deleteSubject.length?(display($("#topic-lead-subject")),console.log(deleteSubject.length)):display($("#topic-error"))}),$("#subject").on("click","a:odd",function(){display($("#topic-lead-subject")),deleteSubject=[];var t=subject[$(this).parent().parent().index()];deleteSubject.push(t),whichDelete=1}),$("#topic-lead-subject .modal-footer").find("button").eq(0).click(function(){if(!whichDelete){deleteSubject=[];for(var t=$("#subject").find("input[type=checkbox]"),e=0;e<t.length;e++)t.eq(e).is(":checked")&&deleteSubject.push(subject[t.eq(e).parent().parent().parent().parent().index()])}var i=$("#topic-lead-subject").find("input").val();console.log(deleteSubject),hidden($(this).parent().parent().parent().parent()),$.ajax({method:"post",url:"http://clayz.top/exam/courseInfo/exam/courseAdd",data:JSON.stringify({leadSubject:deleteSubject,typeChange:i,timeChange:(new Date).Format()}),contentType:"application/json",success:function(t){updateSubject()},error:function(){console.log("lead error")}})}),$("#subject").on("click","tr td:nth-child(2)",function(){$("#topic-modify-subject").find("textarea").val($(this).html()),display($("#topic-modify-subject")),index=$(this).parent().index(),_this=this}),$("#topic-modify-subject .modal-footer").find("button").eq(0).click(function(){var t=$("#topic-modify-subject").find("textarea").val(),e=subject[$(_this).parent().index()].id;this.innerHTML=t,subject[index].content=$(this).parent().parent().find("textarea").html(),hidden($(this).parent().parent().parent().parent()),$.ajax({method:"post",url:"http://clayz.top/exam/",data:JSON.stringify({content:t,id:e}),contentType:"application/json",success:function(){updateSubject()},error:function(){console.log("modify error")}})}),$(".select-subject").find("input").val($(".select-subject ul").find("li > a").eq(0).html()),$(".select-subject").find("button").click(function(t){t.stopPropagation(),$(this).siblings("ul").toggleClass("top-display-b")}),$("body").click(function(){$(".select-subject").find("ul").removeClass("top-display-b")}),$(".select-subject").find("ul > li").click(function(){$(this).parent().parent().siblings("input").val($(this).find("a").html())}),$("#btn1").click(function(){"block"==$("#fliterBox").css("display")?$("#fliterBox").hide("slow"):$("#fliterBox").show("slow")});for(var i=0;i<$("#fliterListNav ul li").length;i++)$("#fliterListNav ul li:eq("+i+")").click(function(t){$("#fliterListNav ul li").removeClass("nav-actived"),$(this).addClass("nav-actived");var e={0:["程序员","软师","前端","java"],1:["程序员","软师","前端","java"],2:["程序员","软师","前端","java"],3:["程序员","软师","前端","java"],4:["程序员","软师","前端","java"]};$("#fliterList ul li").html("");for(var i in e[$(this).attr("name")])$("#fliterList ul li:eq("+i+")").html(e[$(this).attr("name")][i])});for(var j=0;j<$("#fliterList ul li").length;j++)$("#fliterList ul li:eq("+j+")").click(function(t){$("#fliterBox").hide("slow"),$("#span1").text(this.innerHTML)});$(".select-subject").eq(0).find("ul > li").click(function(){var t=$("#span1").text();$.ajax({method:"post",url:"http://clayz.top/exam/libraryInfo",contentType:"text/plain",data:t,success:function(t){subject=[];for(var e=0;e<t.length;e++){var i=new sub;i.content=t[e].content,i.time=t[e].time,i.type=t[e].type,i.kind=t[e].kind,subject.push(i)}insert()},error:function(){console.log("error")}})});